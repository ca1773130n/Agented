# Agented Backend â€” systemd unit file
# Install: sudo cp deploy/agented.service /etc/systemd/system/
# Enable:  sudo systemctl enable agented
# Start:   sudo systemctl start agented
# Logs:    journalctl -u agented -f
#
# Adjust WorkingDirectory and User/Group for your environment.
# The ExecStart path assumes the backend venv is at .venv/ inside WorkingDirectory.

[Unit]
Description=Agented Backend API Server (Gunicorn + gevent)
After=network.target

[Service]
Type=notify
User=agented
Group=agented
WorkingDirectory=/opt/agented/backend
Environment="PATH=/opt/agented/backend/.venv/bin:/usr/local/bin:/usr/bin"
ExecStart=/opt/agented/backend/.venv/bin/gunicorn -c gunicorn.conf.py
ExecReload=/bin/kill -s HUP $MAINPID
Restart=on-failure
RestartSec=3
KillMode=mixed
TimeoutStopSec=30

[Install]
WantedBy=multi-user.target
